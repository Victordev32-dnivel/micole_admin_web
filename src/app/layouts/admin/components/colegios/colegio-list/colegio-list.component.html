<div class="colegio-container">
  <div class="toolbar">
    <mat-form-field appearance="outline" class="search-field">
      <input matInput placeholder="Buscar por nombre o dirección" [formControl]="searchTermControl">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
    <button mat-raised-button color="primary" class="add-button" [disabled]="loading" (click)="openAddDialog()">
      <mat-icon>add</mat-icon>
      Agregar Colegio
    </button>
  </div>

  <div class="colegio-table">
    <div class="table-header">
      <span data-label="ID">ID</span>
      <span data-label="COLEGIO">COLEGIO</span>
      <span data-label="DIRECCIÓN">DIRECCIÓN</span>
      <span data-label="CELULAR">CELULAR</span>
      <span data-label="ACCIONES">ACCIONES</span>
    </div>

    <div class="table-body">
      <div *ngIf="loading" class="loading-container">
        <div class="loading">Cargando datos <span class="spinner"></span></div>
      </div>

      <div class="student-row" *ngFor="let colegio of filteredColegios">
        <span data-label="ID">{{ colegio.id }}</span>
        <span data-label="COLEGIO">{{ colegio.nombre || colegio.colegio }}</span>
        <span data-label="DIRECCIÓN">{{ colegio.direccion }}</span>
        <span data-label="CELULAR">{{ colegio.celular }}</span>
        <span class="actions" data-label="ACCIONES">
          <mat-icon (click)="openEditDialog(colegio.id)" style="color: #ffcc00;" title="Editar">edit</mat-icon>
          <mat-icon (click)="confirmDelete(colegio.id)" style="color: #f44336;" title="Eliminar">delete</mat-icon>
          <mat-icon (click)="openAsignarTrabajadoresDialog(colegio.id)" style="color: #2196F3;" title="Agregar Trabajador">person_add</mat-icon>
          <mat-icon (click)="openVerTrabajadoresDialog(colegio.id)" style="color: #3F51B5;" title="Ver Trabajadores">visibility</mat-icon>
        </span>
      </div>

      <div *ngIf="filteredColegios.length === 0 && !loading" style="text-align: center; padding: 40px; color: #666;">
        <p *ngIf="searchTermControl.value && searchTermControl.value.trim() !== ''">
          No se encontraron colegios que coincidan con "<strong>{{ searchTermControl.value }}</strong>"
        </p>
        <p *ngIf="!searchTermControl.value || searchTermControl.value.trim() === ''">
          No hay colegios para mostrar
        </p>
      </div>
    </div>
  </div>
</div>
