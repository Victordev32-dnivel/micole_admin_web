<div class="dialog-container">
  <div class="dialog-header">
    <h2 class="dialog-title">Editar Apoderado</h2>
  </div>

  <div class="dialog-content">
    <!-- Mensajes de estado -->
    <div class="alert success-alert" *ngIf="successMessage">
      <mat-icon>check_circle</mat-icon>
      <span>{{ successMessage }}</span>
    </div>

    <div class="alert error-alert" *ngIf="error">
      <mat-icon>error</mat-icon>
      <span>{{ error }}</span>
    </div>

    <form [formGroup]="apoderadoForm" (ngSubmit)="onSubmit()" class="form-container">
      <div class="form-grid">
        <!-- Nombre -->
        <div class="form-field">
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Nombre *</mat-label>
            <input 
              matInput 
              formControlName="nombre" 
              placeholder="Ingrese el nombre"
              required
              autocomplete="given-name">
            <mat-icon matSuffix class="field-icon">person</mat-icon>
            <mat-error *ngIf="apoderadoForm.get('nombre')?.hasError('required')">
              Nombre es requerido
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Apellidos -->
        <div class="form-field">
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Apellidos *</mat-label>
            <input 
              matInput 
              formControlName="apellidos" 
              placeholder="Ingrese los apellidos"
              required
              autocomplete="family-name">
            <mat-icon matSuffix class="field-icon">person</mat-icon>
            <mat-error *ngIf="apoderadoForm.get('apellidos')?.hasError('required')">
              Apellidos son requeridos
            </mat-error>
          </mat-form-field>
        </div>

        <!-- DNI -->
        <div class="form-field">
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>DNI *</mat-label>
            <input 
              matInput 
              formControlName="dni" 
              placeholder="12345678"
              maxlength="8"
              pattern="[0-9]*"
              required
              autocomplete="off">
            <mat-icon matSuffix class="field-icon">badge</mat-icon>
            <mat-error *ngIf="apoderadoForm.get('dni')?.hasError('required')">
              DNI es requerido
            </mat-error>
            <mat-error *ngIf="apoderadoForm.get('dni')?.hasError('pattern')">
              DNI debe tener 8 dígitos
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Teléfono -->
        <div class="form-field">
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Teléfono *</mat-label>
            <input 
              matInput 
              formControlName="telefono" 
              placeholder="987654321"
              maxlength="9"
              pattern="[0-9]*"
              required
              autocomplete="tel">
            <mat-icon matSuffix class="field-icon">phone</mat-icon>
            <mat-error *ngIf="apoderadoForm.get('telefono')?.hasError('required')">
              Teléfono es requerido
            </mat-error>
            <mat-error *ngIf="apoderadoForm.get('telefono')?.hasError('pattern')">
              Teléfono debe tener 9 dígitos
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Botones -->
      <div class="button-container">
        <button 
          mat-button 
          type="button"
          (click)="onCancel()"
          [disabled]="loading"
          class="btn-cancel">
          <mat-icon>close</mat-icon>
          <span>Cancelar</span>
        </button>

        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
          [disabled]="loading || apoderadoForm.invalid"
          class="btn-save">
          <mat-spinner 
            *ngIf="loading" 
            diameter="18" 
            class="button-spinner">
          </mat-spinner>
          <mat-icon *ngIf="!loading">save</mat-icon>
          <span class="button-text">
            {{ loading ? 'Guardando...' : 'Guardar' }}
          </span>
        </button>
      </div>
    </form>
  </div>
</div>