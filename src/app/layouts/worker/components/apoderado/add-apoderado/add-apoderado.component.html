<!-- add-apoderado.component.html -->
<h2 mat-dialog-title>{{ data?.apoderado ? 'Editar' : 'Agregar' }} Apoderado</h2>
<mat-dialog-content>
  <form [formGroup]="apoderadoForm" class="apoderado-form">
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>DNI</mat-label>
        <input matInput formControlName="numeroDocumento" placeholder="Ingrese DNI" maxlength="8">
        <mat-error *ngIf="apoderadoForm.get('numeroDocumento')?.hasError('required')">
          DNI es requerido
        </mat-error>
        <mat-error *ngIf="apoderadoForm.get('numeroDocumento')?.hasError('pattern')">
          Ingrese un DNI válido (8 dígitos)
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Nombres</mat-label>
        <input matInput formControlName="nombres" placeholder="Ingrese nombres">
        <mat-error *ngIf="apoderadoForm.get('nombres')?.hasError('required')">
          Nombres son requeridos
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Apellido Paterno</mat-label>
        <input matInput formControlName="apellidoPaterno" placeholder="Ingrese apellido paterno">
        <mat-error *ngIf="apoderadoForm.get('apellidoPaterno')?.hasError('required')">
          Apellido paterno es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Apellido Materno</mat-label>
        <input matInput formControlName="apellidoMaterno" placeholder="Ingrese apellido materno">
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Teléfono</mat-label>
        <input matInput formControlName="telefono" placeholder="Ingrese teléfono" maxlength="9">
        <mat-error *ngIf="apoderadoForm.get('telefono')?.hasError('required')">
          Teléfono es requerido
        </mat-error>
        <mat-error *ngIf="apoderadoForm.get('telefono')?.hasError('pattern')">
          Ingrese un teléfono válido (9 dígitos)
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Parentesco</mat-label>
        <mat-select formControlName="parentesco">
          <mat-option value="PADRE">Padre</mat-option>
          <mat-option value="MADRE">Madre</mat-option>
          <mat-option value="TIO">Tío</mat-option>
          <mat-option value="TIA">Tía</mat-option>
          <mat-option value="ABUELO">Abuelo</mat-option>
          <mat-option value="ABUELA">Abuela</mat-option>
          <mat-option value="OTRO">Otro</mat-option>
        </mat-select>
        <mat-error *ngIf="apoderadoForm.get('parentesco')?.hasError('required')">
          Parentesco es requerido
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Género</mat-label>
        <mat-select formControlName="genero">
          <mat-option value="M">Masculino</mat-option>
          <mat-option value="F">Femenino</mat-option>
          <mat-option value="O">Otro</mat-option>
        </mat-select>
        <mat-error *ngIf="apoderadoForm.get('genero')?.hasError('required')">
          Género es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Contraseña</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="contrasena">
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="apoderadoForm.get('contrasena')?.hasError('required')">
          Contraseña es requerida
        </mat-error>
        <mat-error *ngIf="apoderadoForm.get('contrasena')?.hasError('minlength')">
          Mínimo 6 caracteres
        </mat-error>
      </mat-form-field>
    </div>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="loading || apoderadoForm.invalid">
    <span *ngIf="!loading">{{ data?.apoderado ? 'Actualizar' : 'Guardar' }}</span>
    <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
  </button>
</mat-dialog-actions>